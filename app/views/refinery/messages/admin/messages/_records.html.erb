<%= render 'refinery/admin/search_header', :url => refinery.messages_admin_messages_path %>
<% if searching? %>
  <% if @messages.any? %>
    <ul>
      <%= render :partial => 'message', :collection => @messages %>
    </ul>
  <% else %>
    <p><%= t('no_results', :scope => 'refinery.admin.search') %></p>
  <% end %>
<% else %>
  <% if @grouped_messages.any? -%>
    <% @grouped_messages.each do |container| %>
      <h3><%= l((message_group = container.last).first.created_at, :format => :short) %></h3>
      <ul>
        <%= render :partial => 'message', :collection => message_group %>
      </ul>
    <% end %>
  <% else -%>
    <p>
      <strong><%= t('no_messages', :scope => 'refinery.messages.admin.messages.index') %></strong>
    </p>
  <% end -%>
<% end %>
